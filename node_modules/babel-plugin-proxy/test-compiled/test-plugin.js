'use strict';

var babel = require('babel-core');
var fs = require('fs');

var code = '\nvar a = new Proxy({}, {\n    get: function(obj, key) {\n        if (obj[key] === undefined) {\n            console.log("Accessing undefined of an object!")\n        }\n        return obj[key];\n    },\n    set: function(obj, key, value) {\n        console.log("Setting " + key + " of " + JSON.stringify(obj));\n        obj[key] = value;\n    }\n});\na.b = "abc";\nconsole.log(a.b);\nconsole.log(a.c);\n';

var pluginPath = require.resolve('../build/app.js');
var output = babel.transform(code, {
    plugins: [pluginPath]
});

var outPutcode = output.code;
console.log(outPutcode);

console.log("running...\n\n");

eval(outPutcode);